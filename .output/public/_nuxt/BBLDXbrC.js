import{_ as k}from"./s4AJLiq2.js";import{_ as g,a as x}from"./CQGZ0vk5.js";import{d as w,O as P,Q as F,e as h,w as l,a as s,o as y,j as a,J as U,M as R,S,X as T,b as v,c as N}from"#entry";import{u as $}from"./BtEvuF_g.js";import{u as j}from"./DATWiI3s.js";import{o as B,s as d}from"./ClkMs6Pj.js";import"./Dxt7HkM3.js";const C={class:"flex justify-end"},E=w({__name:"AuthPasswordResetForm",props:{email:{},token:{}},setup(f){const n=f,p=$(),u=B({email:d().email(),password:d().min(8),password_confirmation:d().min(8),token:d()}).refine(r=>r.password===r.password_confirmation,{message:"Passwords do not match",path:["password_confirmation"]}),c=P(),e=F({email:n.email,password:"",password_confirmation:"",token:n.token});async function _(r){c.value?.clear();const o=r.data;try{await p("/reset-password",{method:"POST",body:o}),await T({path:"/login",query:{reset:"true"}})}catch(m){const t=j(m);t.isValidationError&&c.value?.setErrors(t.bag)}}return(r,o)=>{const m=k,t=x,V=S,b=g;return y(),h(b,{ref_key:"form",ref:c,schema:s(u),state:s(e),class:"space-y-4 sm:min-w-80 md:min-w-96 max-w-md",onSubmit:_},{default:l(()=>[a(t,{label:"Email",name:"email"},{default:l(()=>[a(m,{modelValue:s(e).email,"onUpdate:modelValue":o[0]||(o[0]=i=>s(e).email=i),icon:"i-heroicons-at-symbol",class:"w-full",trailing:""},null,8,["modelValue"])]),_:1}),a(t,{label:"New Password",name:"password"},{default:l(()=>[a(m,{modelValue:s(e).password,"onUpdate:modelValue":o[1]||(o[1]=i=>s(e).password=i),type:"password",icon:"i-heroicons-lock-closed",class:"w-full",trailing:""},null,8,["modelValue"])]),_:1}),a(t,{label:"Confirm New Password",name:"password_confirmation"},{default:l(()=>[a(m,{modelValue:s(e).password_confirmation,"onUpdate:modelValue":o[2]||(o[2]=i=>s(e).password_confirmation=i),type:"password",icon:"i-heroicons-arrow-path",class:"w-full",trailing:""},null,8,["modelValue"])]),_:1}),U("div",C,[a(V,{type:"submit"},{default:l(()=>[...o[3]||(o[3]=[R(" Reset Password ",-1)])]),_:1})])]),_:1},8,["schema","state"])}}}),A=Object.assign(E,{__name:"AuthPasswordResetForm"}),z=w({__name:"[hash]",setup(f){v({title:"Reset password"});const n=N(),p=n.query.email??"",u=n.params.hash;return(c,e)=>{const _=A;return y(),h(_,{email:s(p),token:s(u)},null,8,["email","token"])}}});export{z as default};
