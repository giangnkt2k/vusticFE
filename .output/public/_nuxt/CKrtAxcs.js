import{ai as g,O as c}from"#entry";import{u as A}from"./B4rT1Usr.js";import{u}from"./CLWt_t3k.js";function I(){const f=g();let s=f.public.API_URL+"/api/customers";const i=A(),e=c([]),l=c(!1),n=c(null);async function m(a){e.value=[],l.value=!0,n.value=null,a!==void 0&&a!==""&&(s+=`?search=${a}`);try{console.log("Fetching customers with search keyword:",a);const{data:t}=await u(s);e.value=t.value||[],s=f.public.API_URL+"/api/customers"}catch(t){n.value=t}finally{l.value=!1}}async function v(a){try{const{data:t}=await u(s,{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",...i}});console.log("Created customer:",t.value)}catch(t){n.value=t}}async function y(a,t){const{data:d}=await u(`${s}/${a}`,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json",...i}});if(Array.isArray(e.value)){const o=e.value.findIndex(r=>r.id===a);o!==-1&&(e.value[o]=d.value)}else if("data"in e.value){const o=e.value.data.findIndex(r=>r.id===a);o!==-1&&(e.value.data[o]=d.value)}}async function p(a){try{await u(`${s}/${a}`,{method:"DELETE",headers:{...i}}),console.log("Deleted customer:",a),Array.isArray(e.value)?e.value=e.value.filter(t=>t.id!==a):"data"in e.value&&(e.value.data=e.value.data.filter(t=>t.id!==a))}catch(t){n.value=t}}async function C(){}async function h(){}return{customers:e,loading:l,error:n,createCustomer:v,updateCustomer:y,deleteCustomer:p,fetchCustomers:m,importCustomersCSV:C,exportCustomersCSV:h}}export{I as u};
