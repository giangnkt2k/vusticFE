import{d as q,O as m,a1 as j,K as r,J as e,q as k,j as D,af as y,ag as g,w as U,$ as A,a0 as M,v as z,M as f,N as o,S as F,o as i}from"#entry";import{u as H}from"./CKrtAxcs.js";import"./B4rT1Usr.js";import"./CLWt_t3k.js";import"./BwCEniEi.js";import"./BtEvuF_g.js";const X={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},G={class:"grid grid-cols-1 md:grid-cols-3 gap-2 p-4"},I={class:"flex space-x-2 md:col-span-2 col-span-1 md:justify-start justify-between"},J={class:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400"},K={class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},O={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},P={class:"px-6 py-4"},Q={class:"px-6 py-4"},R={class:"px-6 py-4"},W={class:"px-6 py-4"},Y={class:"px-6 py-4"},Z={class:"px-6 py-4"},ee={class:"px-6 py-4"},te={class:"px-6 py-4"},le={class:"px-6 py-4"},se=["onClick"],ae=["onClick"],oe={key:0},ne={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40"},de={class:"bg-white rounded-lg shadow-lg w-full max-w-md p-6 relative"},re={class:"mb-3"},ie={class:"mb-3"},ue={class:"mb-3"},pe={class:"mb-3"},ce={class:"mb-3"},me={class:"flex justify-end gap-2 mt-4"},ye={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40"},ge={class:"bg-white rounded-lg shadow-lg w-full max-w-md p-6 relative"},ve={class:"text-center"},xe={class:"text-sm text-gray-500 mb-6"},je=q({__name:"index",async setup(be){let u,x;const V=[{key:"id",label:"ID"},{key:"name",label:"Tên khách hàng"},{key:"company_name",label:"Tên công ty"},{key:"email",label:"Email"},{key:"phone",label:"Điện thoại"},{key:"address",label:"Địa chỉ"},{key:"contact_point",label:"Mối liên hệ"},{key:"company_tax_code",label:"Mã số thuế công ty"},{key:"note",label:"Ghi chú"}],d=m(void 0),{customers:a,fetchCustomers:b,updateCustomer:T,deleteCustomer:B}=([u,x]=j(()=>H()),u=await u,x(),u);[u,x]=j(()=>b(d.value)),await u,x();const n=m([]);n.value=Array.isArray(a.value)?[...a.value]:[...a.value.data];const h=m(!1),p=m(null),s=m({name:"",email:"",phone:"",address:"",company_tax_code:""}),v=m(!1),N=c=>{s.value={...c},v.value=!0};async function w(){await T(s.value.id,s.value),v.value=!1,s.value={name:"",email:"",phone:"",address:"",company_tax_code:""},n.value=[],await b(d.value),n.value=Array.isArray(a.value)?[...a.value]:[...a.value.data]}const $=c=>{p.value=c,h.value=!0},E=async()=>{if(p.value)try{await B(p.value.id),h.value=!1,p.value=null,await b(d.value),n.value=Array.isArray(a.value)?[...a.value]:[...a.value.data],console.log("Customer deleted successfully, table updated",a.value)}catch(c){console.error("Error deleting customer:",c)}},_=()=>{h.value=!1,p.value=null},L=async()=>{await b(d.value),n.value=Array.isArray(a.value)?[...a.value]:[...a.value.data],console.log("Searched customers:",n),d.value=void 0};return(c,t)=>{const C=F;return i(),r("div",X,[e("div",G,[e("div",I,[y(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>d.value=l),type:"text",placeholder:"Search...",class:"border rounded-lg"},null,512),[[g,d.value]]),D(C,{class:"bg-blue-600 rounded-lg",onClick:L},{default:U(()=>[...t[8]||(t[8]=[f(" Tìm kiếm ",-1)])]),_:1})]),D(C,{to:"/customers/create",class:"col-span-1 bg-green-600 rounded-lg md:justify-self-end justify-center"},{default:U(()=>[...t[9]||(t[9]=[f(" Thêm khách hàng ",-1)])]),_:1})]),e("table",J,[e("thead",K,[e("tr",null,[(i(),r(A,null,M(V,l=>e("th",{key:l.key,scope:"col",class:"px-6 py-3"},o(l.label),1)),64)),t[10]||(t[10]=e("th",{scope:"col",class:"px-6 py-3"}," Action ",-1))])]),e("tbody",null,[(i(!0),r(A,null,M(n.value,l=>(i(),r("tr",{key:l.id,class:"odd:bg-white odd:dark:bg-gray-900 even:bg-gray-50 even:dark:bg-gray-800 border-b dark:border-gray-700 border-gray-200"},[e("th",O,o(l.id),1),e("td",P,o(l.name),1),e("td",Q,o(l.company_name),1),e("td",R,o(l.email),1),e("td",W,o(l.phone),1),e("td",Y,o(l.address),1),e("td",Z,o(l.contact_point),1),e("td",ee,o(l.company_tax_code),1),e("td",te,o(l.note),1),e("td",le,[e("a",{href:"#",class:"font-medium text-blue-600 dark:text-blue-500 hover:underline mr-1",onClick:S=>N(l)},"Edit",8,se),e("a",{href:"#",class:"font-medium text-red-600 dark:text-red-500 hover:underline",onClick:S=>$(l)},"Delete",8,ae)])]))),128)),n.value.length===0?(i(),r("tr",oe,[...t[11]||(t[11]=[e("td",{colspan:"7",class:"px-6 py-4 text-center text-gray-500"}," No customers found ",-1)])])):k("",!0)])]),v.value?(i(),r("div",ne,[e("div",de,[e("button",{class:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",onClick:t[1]||(t[1]=l=>v.value=!1)},[...t[12]||(t[12]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),t[18]||(t[18]=e("h2",{class:"text-xl font-bold mb-4"}," Update Customer ",-1)),e("form",{onSubmit:z(w,["prevent"])},[e("div",re,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium mb-1"},"Name",-1)),y(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>s.value.name=l),type:"text",required:"",class:"w-full px-3 py-2 border rounded-lg"},null,512),[[g,s.value.name]])]),e("div",ie,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium mb-1"},"Email",-1)),y(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>s.value.email=l),type:"email",required:"",class:"w-full px-3 py-2 border rounded-lg"},null,512),[[g,s.value.email]])]),e("div",ue,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium mb-1"},"Phone",-1)),y(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>s.value.phone=l),type:"text",class:"w-full px-3 py-2 border rounded-lg"},null,512),[[g,s.value.phone]])]),e("div",pe,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium mb-1"},"Address",-1)),y(e("input",{"onUpdate:modelValue":t[5]||(t[5]=l=>s.value.address=l),type:"text",class:"w-full px-3 py-2 border rounded-lg"},null,512),[[g,s.value.address]])]),e("div",ce,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium mb-1"},"Company Tax Code ",-1)),y(e("input",{"onUpdate:modelValue":t[6]||(t[6]=l=>s.value.company_tax_code=l),type:"text",class:"w-full px-3 py-2 border rounded-lg"},null,512),[[g,s.value.company_tax_code]])]),e("div",me,[e("button",{type:"button",class:"px-4 py-2 rounded-lg bg-gray-200 text-gray-700",onClick:t[7]||(t[7]=l=>v.value=!1)}," Cancel "),e("button",{type:"submit",class:"px-4 py-2 rounded-lg bg-green-600 text-white",onClick:w}," Update ")])],32)])])):k("",!0),h.value?(i(),r("div",ye,[e("div",ge,[e("button",{class:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",onClick:_},[...t[19]||(t[19]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),e("div",ve,[t[22]||(t[22]=e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4"},[e("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),t[23]||(t[23]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-2"}," Xác nhận xóa khách hàng ",-1)),e("p",xe,[t[20]||(t[20]=f(" Bạn có chắc chắn muốn xóa khách hàng ",-1)),e("strong",null,'"'+o(p.value?.name)+'"',1),t[21]||(t[21]=f(" không? Hành động này không thể hoàn tác. ",-1))]),e("div",{class:"flex justify-center gap-3"},[e("button",{type:"button",class:"px-4 py-2 rounded-lg bg-gray-200 text-gray-700 hover:bg-gray-300",onClick:_}," Hủy "),e("button",{type:"button",class:"px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700",onClick:E}," Xóa ")])])])])):k("",!0)])}}});export{je as default};
